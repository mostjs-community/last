{"version":3,"file":null,"sources":["../src/index.js"],"sourcesContent":["export const last = stream =>\n  new Last(stream)\n\nclass Last {\n  constructor (source) {\n    this.source = source\n  }\n\n  run (sink, scheduler) {\n    return this.source.run(new LastSink(sink), scheduler)\n  }\n}\n\nclass LastSink {\n  constructor (sink) {\n    this.sink = sink\n    this.has = false\n    this.value = void 0\n  }\n\n  event (t, x) {\n    this.has = true\n    this.value = x\n  }\n\n  error (t, e) {\n    this.sink.error(t, e)\n  }\n\n  end (t, x) {\n    if (this.has) {\n      this.sink.event(t, this.value)\n    }\n    this.sink.end(t, x)\n  }\n}\n"],"names":[],"mappings":"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"}