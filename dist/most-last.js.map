{"version":3,"file":null,"sources":["../src/index.js"],"sourcesContent":["export const last = stream => new stream.constructor(new Last(stream.source))\n\nclass Last {\n  constructor (source) {\n    this.source = source\n  }\n\n  run (sink, scheduler) {\n    return this.source.run(new LastSink(sink), scheduler)\n  }\n}\n\nclass LastSink {\n  constructor (sink) {\n    this.sink = sink\n    this.has = false\n    this.value = void 0\n  }\n\n  event (t, x) {\n    this.has = true\n    this.value = x\n  }\n\n  error (t, e) {\n    this.sink.error(t, e)\n  }\n\n  end (t, x) {\n    if (this.has) {\n      this.sink.event(t, this.value)\n    }\n    this.sink.end(t, x)\n  }\n}\n"],"names":["const"],"mappings":";;;;;;AAAOA,IAAM,IAAI,GAAG,UAAA,MAAM,EAAC,SAAG,IAAI,MAAM,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,GAAA,CAAC;;AAE9E,IAAM,IAAI,GAAC,aACE,CAAC,MAAM,EAAE;EACpB,IAAM,CAAC,MAAM,GAAG,MAAM,CAAC;CACtB,CAAA;;AAEH,eAAE,GAAG,iBAAC,IAAI,EAAE,SAAS,EAAE;EACrB,OAAS,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE,SAAS,CAAC,CAAC;CACvD,CAAA;;AAGH,IAAM,QAAQ,GAAC,iBACF,CAAC,IAAI,EAAE;EAClB,IAAM,CAAC,IAAI,GAAG,IAAI,CAAC;EACnB,IAAM,CAAC,GAAG,GAAG,KAAK,CAAC;EACnB,IAAM,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;CACrB,CAAA;;AAEH,mBAAE,KAAK,mBAAC,CAAC,EAAE,CAAC,EAAE;EACZ,IAAM,CAAC,GAAG,GAAG,IAAI,CAAC;EAClB,IAAM,CAAC,KAAK,GAAG,CAAC,CAAC;CAChB,CAAA;;AAEH,mBAAE,KAAK,mBAAC,CAAC,EAAE,CAAC,EAAE;EACZ,IAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;CACvB,CAAA;;AAEH,mBAAE,GAAG,iBAAC,CAAC,EAAE,CAAC,EAAE;EACV,IAAM,IAAI,CAAC,GAAG,EAAE;IACd,IAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;GAChC;EACH,IAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;CACrB;;;;;;"}